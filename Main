#include <SoftwareSerial.h>
#include <DFRobotDFPlayerMini.h>

SoftwareSerial mySerial(10, 11); // RX, TX
DFRobotDFPlayerMini myDFPlayer;

const int sensorPin = A0; // Analog pin to read voltage
int lastTrack = -1;

void setup() {
  Serial.begin(9600);
  mySerial.begin(9600);

  if (!myDFPlayer.begin(mySerial)) {
    Serial.println("Unable to begin DFPlayer Mini:");
    while (true); // Halt
  }
  Serial.println("DFPlayer Mini online.");

  myDFPlayer.volume(20); // Set volume (0–30)
}

void loop() {
  int sensorValue = analogRead(sensorPin); // Read analog voltage
  int trackToPlay = map(sensorValue, 0, 1023, 1, 5); // Map to track 1–5

  if (CurrentTrack != lastTrack) {
    Serial.print("Playing track: ");
    Serial.println(CurrentTrack);
    myDFPlayer.play(CurrentTrack);
    lastTrack = CurrentTrack;
    delay(2000); // Debounce delay between tracks
  }
}
